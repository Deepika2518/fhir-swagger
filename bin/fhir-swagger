#!/usr/bin/env node

var FS = require('fs');
var args = require('yargs').argv;
args.fhir_url = args.fhir_url || 'http://argonaut.healthintersections.com.au/open';
args.conformance_path = args.conformance_path || '/metadata?_format=application/json';
args.output = args.output || './swagger.json';
if (args.username) {
  args.authorization = {
    username: args.username,
    password: args.password,
  }
}
if (args.reject_unauthorized === 'false' || args.reject_unauthorized === '0') {
  args.reject_unauthorized = false;
}

require('../index.js')(args, function(err, swagger) {
  if (err) throw err;
  FS.writeFileSync(args.output, JSON.stringify(swagger, null, 2))
});

